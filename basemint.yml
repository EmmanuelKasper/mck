    - name: download mint {{ version }} distribution
      get_url:
        url: "https://bintray.com/freemint/freemint/download_file?file_path=snapshots%2F{{ major_version }}-{{ commit_hash }}%2Ffreemint-{{ major_version }}-{{ minor_version }}-000-st_ste.zip"
        dest: "{{ playbook_dir }}/freemint-{{ version }}-000-st_ste.zip"
        force: no

    - name: create folder structure
      file:
        path: "{{ item }}"
        state: directory
      loop:
        - freemint
        - build/auto
        - build/extra

    - name: unpack freemint archive
      unarchive:
        src: freemint-{{ version }}-000-st_ste.zip
        dest: freemint
        creates: freemint/auto/mint-{{ minor_version }}.prg

    - name: copy freemint kernel
      copy:
        src: freemint/auto/mint-{{ minor_version }}.prg
        dest: build/auto/mint-{{ minor_version }}.prg

    - name : copy freemint sysdir
      command: cp -r freemint/mint build/
      args:
        creates: build/mint

    - name: remove default hostname
      replace:
        path: "build/mint/{{ version }}/mint.cnf"
        regexp : '^setenv HOSTNAME saturn$'
        replace: 'setenv HOSTNAME stmint'

    - name: disable {{ item }} driver
      command: mv build/mint/{{ version }}/{{ item }}.xfs build/mint/{{ version }}/{{ item }}.xfx
      args:
        creates: build/mint/{{ version }}/{{ item }}.xfx
      loop:
        - ext2
        - nfs